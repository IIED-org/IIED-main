services:
  acquia_connector.kernel_request.codestudio_message:
    class: Drupal\acquia_connector\EventSubscriber\KernelRequest\CodeStudioMessage
    arguments: ['@messenger']
    tags:
      - {name: event_subscriber}
  acquia_connector.telemetry:
    class: Drupal\acquia_connector\EventSubscriber\KernelTerminate\AcquiaTelemetry
    arguments: ['@extension.list.module', '@http_client', '@config.factory', '@state', '@datetime.time']
    tags:
      - { name: event_subscriber }
  acquia_connector.client.factory:
    class: Drupal\acquia_connector\Client\ClientFactory
    arguments: ['@logger.factory', '@extension.list.module', '@http_client_factory', '@datetime.time']
  acquia_connector.site_profile:
    class: Drupal\acquia_connector\SiteProfile\SiteProfile
    arguments: ['@request_stack', '@state', '@config.factory', '@module_handler', '@path_alias.manager']
  acquia_connector.site_profile_report:
    class: Drupal\acquia_connector\SiteProfile\SiteProfileReport
    arguments: ['@acquia_connector.subscription', '@state', '@acquia_connector.site_profile', '@module_handler']
  acquia_connector.subscription:
    class: Drupal\acquia_connector\Subscription
    arguments: ['@event_dispatcher', '@cache.default', '@acquia_connector.client.factory', '@state', '@config.factory']
  acquia_connector.logger_channel:
    class: Drupal\Core\Logger\LoggerChannel
    factory: logger.factory:get
    arguments: ['acquia_connector']
  acquia_connector.settings.acquiacloud:
    class: Drupal\acquia_connector\EventSubscriber\GetSettings\FromAcquiaCloud
    arguments: ['@acquia_connector.logger_channel', '@messenger', '@acquia_connector.site_profile', '@state']
    tags:
      - { name: event_subscriber }
  acquia_connector.settings.core:
    class: Drupal\acquia_connector\EventSubscriber\GetSettings\FromCoreSettings
    tags:
      - { name: event_subscriber }
  acquia_connector.settings.state:
    class: Drupal\acquia_connector\EventSubscriber\GetSettings\FromCoreState
    arguments: ['@state']
    tags:
      - { name: event_subscriber }
